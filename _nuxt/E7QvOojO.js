import"./B-s4ZqkC.js";import{a as K,B as q}from"./DJrXkGIA.js";import{g as E,_ as O,c as R,o as m,a as l,O as D,t as $,b as r,A as L,T as N,U as W,W as G,S as J,F as k,r as z,N as Q,M as X,e as Y,Y as H,m as U,X as Z,d as a,j as t,Q as B,w as c,k as _,n as ee}from"#entry";import{B as u}from"./BPW68NmM.js";import{u as le}from"./BRjPVNtu.js";const oe=E({name:"BaseTextBox",emits:["update:modelValue"],components:{BaseIcon:K},props:{modelValue:[String,Number],label:String,prependIcon:String,appendIcon:String,placeholder:String,height:String,resize:{type:String,default:"none"},type:{type:String,default:"text"},error:String},data(){return{hideValue:!1}},methods:{onInput(n){this.$emit("update:modelValue",n.target?.value??"")}},created(){this.hideValue=this.type==="password"}}),se={class:"text-box-wrapper"},te={class:"header",style:{display:"flex","align-items":"start","padding-right":"1em"}},ne={key:0,class:"caption-container",style:{flex:"auto 1 1"}},re={class:"caption"},ue={key:1,class:"error-container",style:{display:"flex",gap:".2em","justify-content":"flex-end","font-size":"14px",color:"red",opacity:".6","line-height":"1.4em"}},ae={class:"error-message"},ie={class:"text-box-section"},de=["type","placeholder","value"];function me(n,i,p,w,b,T){const y=L("BaseIcon");return m(),R("div",{class:G(["text-box",{invalid:n.error}])},[l("label",null,[l("div",se,[l("header",te,[n.label?(m(),R("div",ne,[l("span",re,$(n.label),1)])):D("",!0),n.error?(m(),R("div",ue,[r(y,{name:"mdi-alert-decagram"}),l("span",ae,$(n.error),1)])):D("",!0)]),l("section",ie,[n.prependIcon?(m(),N(y,{key:0,class:"prepend-icon",name:n.prependIcon},null,8,["name"])):D("",!0),l("textarea",{style:W({height:n.height,resize:n.resize}),type:n.type,placeholder:n.placeholder,value:n.modelValue,onInput:i[0]||(i[0]=(...V)=>n.onInput&&n.onInput(...V))},null,44,de),n.appendIcon?(m(),N(y,{key:1,class:"append-icon",name:n.appendIcon},null,8,["name"])):D("",!0)])])])],2)}const x=Object.assign(O(oe,[["render",me]]),{__name:"CommonBaseMemo"}),pe=E({emits:["update:modelValue"],props:{n:{required:!0,type:Number},modelValue:{required:!0,type:Array}},data(){return{rows:[]}},created(){this.rows=[this.createEmptyRow(this.n)]},methods:{createEmptyRow(n){return Array.from({length:n},()=>"")},trim(n){return(n??"").replace(/\u00A0/g," ").replace(/\u200B/g,"").replace(/<br\s*\/?>/gi,`
`).replace(/\s+/g," ").trim()},isRowEmpty(n){return n.every(i=>this.trim(i)==="")},ensureInvariants(){if(this.rows.length>1){const n=this.rows.length-1;this.rows=this.rows.filter((i,p)=>p===n||!this.isRowEmpty(i))}this.rows.length===0?this.rows.push(this.createEmptyRow(this.n)):this.isRowEmpty(this.rows[this.rows.length-1])||this.rows.push(this.createEmptyRow(this.n))},onInput(n,i,p){const w=n.target,b=this.trim(w.textContent??w.innerText);this.rows[i][p]=b,this.$emit("update:modelValue",this.rows),this.ensureInvariants()},focusNext(n,i){const p=this.rows.length-1;n===p&&!this.isRowEmpty(this.rows[n])&&this.rows.push(this.createEmptyRow(this.n));let w=n,b=i+1;b>=this.n&&(b=0,w=Math.min(n+1,this.rows.length-1)),queueMicrotask(()=>{const T=document.querySelectorAll("tbody td")[w*this.n+b];T&&(T.focus(),this.placeCaretAtEnd(T))})},placeCaretAtEnd(n){const i=document.createRange();i.selectNodeContents(n),i.collapse(!1);const p=window.getSelection();p?.removeAllRanges(),p?.addRange(i)}}}),we=["onFocusout","onKeydown"];function be(n,i,p,w,b,T){return m(),R(k,null,[J(n.$slots,"default"),(m(!0),R(k,null,z(n.rows,(y,V)=>(m(),R("tr",{key:V},[(m(!0),R(k,null,z(y,(A,P)=>(m(),R("td",{key:`${V}:${P}`,contenteditable:"",spellcheck:"false",onFocusout:o=>n.onInput(o,V,P),onKeydown:Q(X(o=>n.focusNext(V,P),["prevent"]),["enter"]),class:"cell"},$(n.rows[V][P]),41,we))),128))]))),128))],64)}const h=Object.assign(O(pe,[["render",be]]),{__name:"DynamicRow"}),Ce={class:"construct-pass-page"},fe={class:"documents"},Re={class:"document"},Te={class:"flex-line"},Ve={class:"flex-line"},ge={class:"flex-line"},ye={class:"flex-line"},Pe={class:"flex-line"},De={class:"flex-line"},ve={style:{"list-style-type":"lower-latin","margin-top":".4em"}},Se={style:{"font-size":".8em","max-width":"100%"}},Ue={key:0,class:"error",style:{"margin-top":"1em",color:"red"}},$e={style:{margin:"1.4em 0 5em",display:"flex","justify-content":"flex-end",gap:"1em"}},xe=E({__name:"construct-pass",setup(n){const{$api:i}=Y(),w=H().query.issueKey,b=U(""),T=U(!1);function y(d){const e={},s={testedAirPressureDate:"checkDate1",airPressure:"airPressure1",airPressureCm2:"airPressure2",soapEmulsionPressure:"pressure1",soapEmulsionPressureCm2:"pressure2",waterColumn:"pressure3",tightnessAirPressure:"pressure4",tightnessDuration:"duration",tightnessPressureDrop:"pressureDown1",tightnessPressureDropCm2:"pressureDown2",tightnessPermissiblePressureDrop:"pressureDown3",tightnessPermissiblePressureDropCm2:"pressureDown4"};return Object.keys(d).forEach(C=>{const f=s[C]??C;e[f]=d[C]??""}),e}function V(){T.value=!0;const d=y(o),e=P(v.value,"firstTable"),s=P(S.value,"secondTable"),C=_().token,f={issueKey:w,data:{...d,...e,...s}};A(f.data),console.log("body",f),i("v1/portal/generate-passport",{method:"POST",headers:{Authorization:`Bearer ${C}`},body:f}).then(g=>{ee("/issues/")}).catch(g=>{console.error(g),b.value=g.data.message}).finally(()=>{T.value=!1})}function A(d){["smrName","serviceName","address","characteristics","certificateList","firstTableRow1Column1","firstTableRow1Column2","firstTableRow1Column3","firstTableRow1Column4","firstTableRow1Column5","firstTableRow1Column6","firstTableRow2Column1","firstTableRow2Column2","firstTableRow2Column3","firstTableRow2Column4","firstTableRow2Column5","firstTableRow2Column6","firstTableRow3Column1","firstTableRow3Column2","firstTableRow3Column3","firstTableRow3Column4","firstTableRow3Column5","firstTableRow3Column6","firstTableRow4Column1","firstTableRow4Column2","firstTableRow4Column3","firstTableRow4Column4","firstTableRow4Column5","firstTableRow4Column6","firstTableRow5Column1","firstTableRow5Column2","firstTableRow5Column3","firstTableRow5Column4","firstTableRow5Column5","firstTableRow5Column6","firstTableRow6Column1","firstTableRow6Column2","firstTableRow6Column3","firstTableRow6Column4","firstTableRow6Column5","firstTableRow6Column6","firstTableRow7Column1","firstTableRow7Column2","firstTableRow7Column3","firstTableRow7Column4","firstTableRow7Column5","firstTableRow7Column6","firstTableRow8Column1","firstTableRow8Column2","firstTableRow8Column3","firstTableRow8Column4","firstTableRow8Column5","firstTableRow8Column6","firstTableRow9Column1","firstTableRow9Column2","firstTableRow9Column3","firstTableRow9Column4","firstTableRow9Column5","firstTableRow9Column6","firstTableRow10Column1","firstTableRow10Column2","firstTableRow10Column3","firstTableRow10Column4","firstTableRow10Column5","firstTableRow10Column6","performingWorkPerson","checkDate1","airPressure1","airPressure2","pressure1","pressure2","checkDate2","presure3","presure4","duration","presureDown1","presureDown2","presureDown3","presureDown4","workSupervisor","gasRepresentative","organizationName","projectReleaseDate","drawingNumber","buildStartDate","buildEndDate","engineerSOVGO","secondTableRow1Column1","secondTableRow1Column2","secondTableRow1Column3","secondTableRow1Column4","secondTableRow1Column5","secondTableRow1Column6","secondTableRow1Column7","secondTableRow1Column8","secondTableRow1Column9","secondTableRow1Column10","secondTableRow1Column11","secondTableRow2Column1","secondTableRow2Column2","secondTableRow2Column3","secondTableRow2Column4","secondTableRow2Column5","secondTableRow2Column6","secondTableRow2Column7","secondTableRow2Column8","secondTableRow2Column9","secondTableRow2Column10","secondTableRow2Column11","secondTableRow3Column1","secondTableRow3Column2","secondTableRow3Column3","secondTableRow3Column4","secondTableRow3Column5","secondTableRow3Column6","secondTableRow3Column7","secondTableRow3Column8","secondTableRow3Column9","secondTableRow3Column10","secondTableRow3Column11","secondTableRow4Column1","secondTableRow4Column2","secondTableRow4Column3","secondTableRow4Column4","secondTableRow4Column5","secondTableRow4Column6","secondTableRow4Column7","secondTableRow4Column8","secondTableRow4Column9","secondTableRow4Column10","secondTableRow4Column11"].forEach(s=>{d[s]=d[s]??""})}function P(d,e){const s={};for(let C=0;C<d.length;C++){const f=d[C];if(!(!f||!Array.isArray(f)))for(let g=0;g<f.length;g++){const M=f[g];s[`${e}Row${C+1}Column${g+1}`]=M??""}}return s}const o=Z({}),v=U([]),S=U([]),I=new Date().toLocaleDateString("fr-CA");o.testedAirPressureDate=I,o.airPressure="0.1",o.airPressureCm2="1.0",o.soapEmulsionPressure="0.005",o.soapEmulsionPressureCm2="0.05",o.waterColumn="500мм.",o.tightnessAirPressure="0.05",o.tightnessAirPressureCm2="-",o.tightnessDuration="5 мин.",o.tightnessPressureDrop="0.005",o.tightnessPressureDropCm2="-",o.tightnessPermissiblePressureDrop="20 мм.",o.tightnessPermissiblePressureDropCm2="-";const j=JSON.parse(localStorage.getItem("user")||"{}");o.smrName=j.userName??"";const F=le().issues;if(w){const d=F.find(e=>e.issueKey===w);d&&(o.address=d?.address??"")}return(d,e)=>(m(),R("section",Ce,[l("div",fe,[l("article",Re,[e[62]||(e[62]=l("h1",{class:"center"},"СТРОИТЕЛЬНЫЙ ПАСПОРТ",-1)),e[63]||(e[63]=l("h1",{class:"center"},"ВНУТРИДОМОВОГО (ВНУТРИЦЕХОВОГО) ГАЗООБОРУДОВАНИЯ,",-1)),l("div",Te,[e[29]||(e[29]=a(" смонтированного ",-1)),r(u,{modelValue:t(o).smrName,"onUpdate:modelValue":e[0]||(e[0]=s=>t(o).smrName=s),placeholder:"Наименование проектной организации"},null,8,["modelValue"])]),e[64]||(e[64]=l("h2",{class:"center"},"Служба по обслуживанию внутридомового газового оборудования",-1)),l("div",Ve,[e[30]||(e[30]=a("по адресу: ",-1)),r(u,{modelValue:t(o).address,"onUpdate:modelValue":e[1]||(e[1]=s=>t(o).address=s),placeholder:"Адрес абонента"},null,8,["modelValue"])]),e[65]||(e[65]=l("h2",{class:"center"},"1.ХАРАКТЕРИСТИКА ГАЗООБОРУДОВАНИЯ",-1)),e[66]||(e[66]=l("p",null,"Указывается для внутридомового газооборудования – число квартир, тип и число установленных газовых приборов, общая протяженность газопровода и число запорных устройств на них; для внутрицехового оборудования общая протяженность газопровода, тип и число установленного газооборудования, рабочее давление газа",-1)),r(x,{modelValue:t(o).characteristics,"onUpdate:modelValue":e[2]||(e[2]=s=>t(o).characteristics=s),resize:"vertical",placeholder:"Начните вводить сюда"},null,8,["modelValue"]),e[67]||(e[67]=l("h2",{class:"center"},"2. ПЕРЕЧЕНЬ ПРИЛАГАЕМЫХ СЕРТИФИКАТОВ, ТЕХНИЧЕСКИХ ПАСПОРТОВ И ДРУГИХ ДОКУМЕНТОВ, УДОСТОВЕРЯЮЩИХ КАЧЕСТВО МАТЕРИАЛОВ И ОБОРУДОВАНИЯ",-1)),r(x,{modelValue:t(o).certificateList,"onUpdate:modelValue":e[3]||(e[3]=s=>t(o).certificateList=s),resize:"vertical",placeholder:"Начните вводить сюда"},null,8,["modelValue"]),e[68]||(e[68]=l("h2",{class:"center"},"3. ДАННЫЕ О СВАРКЕ СТЫКОВ ГАЗОПРОВОДА",-1)),l("table",null,[e[31]||(e[31]=l("thead",null,[l("tr",null,[l("td",{rowspan:"2"},"ФИО сварщика"),l("td",{colspan:"2"},"Клеймо и номер удостоверения сварщика"),l("td",{rowspan:"2"},"Сварено стыков"),l("td",{rowspan:"2"},"Дата проведения сварочных работ")]),l("tr",null,[l("td",{colspan:"0.5"},"Диаметр, мм"),l("td",{colspan:"0.5"},"Число, шт.")])],-1)),l("tbody",null,[r(h,{modelValue:t(v),"onUpdate:modelValue":e[4]||(e[4]=s=>B(v)?v.value=s:null),n:5},null,8,["modelValue"])])]),e[69]||(e[69]=l("br",null,null,-1)),r(u,{modelValue:t(o).performingWorkPerson,"onUpdate:modelValue":e[5]||(e[5]=s=>t(o).performingWorkPerson=s),placeholder:"Должность, подпись, инициалы, фамилия производителя работ"},null,8,["modelValue"]),e[70]||(e[70]=l("h2",{class:"center"},"4. ПРОВЕРКА И ОЧИСТКА ВНУТРЕННЕЙ ПОЛОСТИ ГАЗОПРОВОДА ИСПЫТАНИЕ ГАЗОПРОВОДА НА ПРОЧНОСТЬ И ГЕРМЕТИЧНОСТЬ",-1)),l("ol",null,[e[52]||(e[52]=l("li",null,"Перед монтажом газопровода трубы осмотрены и внутренняя полость их очищена от грязи, окалины и других засорений",-1)),l("li",null,[l("p",null,[r(u,{modelValue:t(o).testedAirPressureDate,"onUpdate:modelValue":e[6]||(e[6]=s=>t(o).testedAirPressureDate=s),type:"date"},null,8,["modelValue"]),e[32]||(e[32]=a(" газопровод испытан на прочность давлением воздуха ",-1)),r(u,{modelValue:t(o).airPressure,"onUpdate:modelValue":e[7]||(e[7]=s=>t(o).airPressure=s)},null,8,["modelValue"]),e[33]||(e[33]=a(" МПа ",-1)),r(u,{modelValue:t(o).airPressureCm2,"onUpdate:modelValue":e[8]||(e[8]=s=>t(o).airPressureCm2=s)},null,8,["modelValue"]),e[34]||(e[34]=a(" кгс/см",-1)),e[35]||(e[35]=l("sup",null,"2",-1)),e[36]||(e[36]=a(" в течении 1 ч на участке от отключающего устройства на вводе до кранов на отпусках к оборудованию (приборам). Испытание на прочность газопровода выдержал с внешним осмотром и поверкой сварных и фланцевых соединений с помощью мыльной эмульсии после давления до ",-1)),r(u,{modelValue:t(o).soapEmulsionPressure,"onUpdate:modelValue":e[9]||(e[9]=s=>t(o).soapEmulsionPressure=s)},null,8,["modelValue"]),e[37]||(e[37]=a(" МПа ",-1)),r(u,{modelValue:t(o).soapEmulsionPressureCm2,"onUpdate:modelValue":e[10]||(e[10]=s=>t(o).soapEmulsionPressureCm2=s),placeholder:"кгс/см2"},null,8,["modelValue"]),e[38]||(e[38]=a(". ",-1))]),e[39]||(e[39]=l("p",null," Дефекты и утечки не обнаружены. Испытание на прочность газопровод выдержал. ",-1))]),l("li",null,[l("p",null,[r(u,{modelValue:t(o).checkDate2,"onUpdate:modelValue":e[11]||(e[11]=s=>t(o).checkDate2=s),type:"date"},null,8,["modelValue"]),e[40]||(e[40]=a(" Газопровод испытан на герметичность давлением воздуха ",-1)),r(u,{modelValue:t(o).waterColumn,"onUpdate:modelValue":e[12]||(e[12]=s=>t(o).waterColumn=s)},null,8,["modelValue"]),e[41]||(e[41]=a(" вод/ст. ",-1)),r(u,{modelValue:t(o).tightnessAirPressure,"onUpdate:modelValue":e[13]||(e[13]=s=>t(o).tightnessAirPressure=s)},null,8,["modelValue"]),e[42]||(e[42]=a(" МПа ",-1)),r(u,{modelValue:t(o).tightnessAirPressureCm2,"onUpdate:modelValue":e[14]||(e[14]=s=>t(o).tightnessAirPressureCm2=s)},null,8,["modelValue"]),e[43]||(e[43]=a(" кгс/см2 с подключением газовыми приборами. При испытании в течении ",-1)),r(u,{modelValue:t(o).tightnessDuration,"onUpdate:modelValue":e[15]||(e[15]=s=>t(o).tightnessDuration=s)},null,8,["modelValue"]),e[44]||(e[44]=a(" давление упало на ",-1)),r(u,{modelValue:t(o).tightnessPressureDrop,"onUpdate:modelValue":e[16]||(e[16]=s=>t(o).tightnessPressureDrop=s)},null,8,["modelValue"]),e[45]||(e[45]=a(" МПа ",-1)),r(u,{modelValue:t(o).tightnessPressureDropCm2,"onUpdate:modelValue":e[17]||(e[17]=s=>t(o).tightnessPressureDropCm2=s)},null,8,["modelValue"]),e[46]||(e[46]=a(" кгс/см2 при допустимом падении ",-1)),r(u,{modelValue:t(o).tightnessPermissiblePressureDrop,"onUpdate:modelValue":e[18]||(e[18]=s=>t(o).tightnessPermissiblePressureDrop=s)},null,8,["modelValue"]),e[47]||(e[47]=a(" вод/ст. ",-1)),r(u,{modelValue:t(o).tightnessPermissiblePressureDropCm2,"onUpdate:modelValue":e[19]||(e[19]=s=>t(o).tightnessPermissiblePressureDropCm2=s)},null,8,["modelValue"]),e[48]||(e[48]=a(" кгс/см2. ",-1))]),e[51]||(e[51]=l("p",null," Испытание на герметичность газопровод выдержал. ",-1)),l("div",ge,[e[49]||(e[49]=a("Производитель работ ",-1)),r(u,{modelValue:t(o).workSupervisor,"onUpdate:modelValue":e[20]||(e[20]=s=>t(o).workSupervisor=s),placeholder:"должность, инициалы, фамилия"},null,8,["modelValue"])]),l("div",ye,[e[50]||(e[50]=a("Представитель газового хозяйства ",-1)),r(u,{modelValue:t(o).gasRepresentative,"onUpdate:modelValue":e[21]||(e[21]=s=>t(o).gasRepresentative=s),placeholder:"должность, инициалы, фамилия"},null,8,["modelValue"])])])]),e[71]||(e[71]=l("h2",{class:"center"},"5. ЗАКЛЮЧЕНИЕ",-1)),e[72]||(e[72]=l("p",null,"Внутридомовое (внутрицеховое) газооборудование (включая газопровод и ГРУ) смонтировано в соответствии с проектом, разработанным",-1)),l("div",Pe,[r(u,{modelValue:t(o).organizationName,"onUpdate:modelValue":e[22]||(e[22]=s=>t(o).organizationName=s),placeholder:"Наименование проектной организации"},null,8,["modelValue"]),r(u,{modelValue:t(o).projectReleaseDate,"onUpdate:modelValue":e[23]||(e[23]=s=>t(o).projectReleaseDate=s),type:"date",placeholder:"Дата выпуска проекта"},null,8,["modelValue"])]),l("p",null,[e[53]||(e[53]=a("с учетом согласованных изменений, внесенных в рабочие чертежи № ",-1)),r(u,{modelValue:t(o).drawingNumber,"onUpdate:modelValue":e[24]||(e[24]=s=>t(o).drawingNumber=s),placeholder:"номер чертежа"},null,8,["modelValue"])]),l("p",null,[e[54]||(e[54]=a("Строительство начато ",-1)),r(u,{modelValue:t(o).buildStartDate,"onUpdate:modelValue":e[25]||(e[25]=s=>t(o).buildStartDate=s),type:"date"},null,8,["modelValue"])]),l("p",null,[e[55]||(e[55]=a("Строительство закончено ",-1)),r(u,{modelValue:t(o).buildEndDate,"onUpdate:modelValue":e[26]||(e[26]=s=>t(o).buildEndDate=s),type:"date"},null,8,["modelValue"])]),l("div",De,[e[56]||(e[56]=a("Ведущий инженер СОВГО: ",-1)),r(u,{modelValue:t(o).engineerSOVGO,"onUpdate:modelValue":e[27]||(e[27]=s=>t(o).engineerSOVGO=s),placeholder:"должность, инициалы, фамилия"},null,8,["modelValue"])]),e[73]||(e[73]=l("p",{style:{"font-style":"italic","font-size":"14px",opacity:".6","line-height":"1.4em","margin-bottom":".8em"}}," Примечание: Если в цехе (котельной) имеются ГРУ, смонтировано в общем помещении цеха и обслуживающая только данный цех, то на внутрицеховой газопровод и ГРУ допускается составлять общий строительный паспорт. В том случае ниже приведенную форму паспорта должны быть внесены следующие изменения ",-1)),l("ol",ve,[e[58]||(e[58]=l("li",null,"в раздел 1 характеристика газооборудования цеха должна быть приведена по следующей форме:",-1)),l("table",Se,[e[57]||(e[57]=l("thead",null,[l("tr",null,[l("td",{rowspan:"2"},"Общая протяженность газопровода цеха, м"),l("td",{colspan:"2"},"Давление газа МПа (кгс/см2)"),l("td",{colspan:"4"},"Оборудование ГРУ, тип, размер"),l("td",{colspan:"4"},"Газифицируемое оборудование (печи, котла, приборы, шт.)")]),l("tr",null,[l("td",null,"На входе P max"),l("td",null,"На выходе из ГРП (рабочее Р)"),l("td",null,"Регулятор давления"),l("td",null,"Клапан отключитель"),l("td",null,"Предохранительный сбросной клапан"),l("td",null,"Фильтр"),l("td"),l("td"),l("td"),l("td")])],-1)),l("tbody",null,[r(h,{modelValue:t(S),"onUpdate:modelValue":e[28]||(e[28]=s=>B(S)?S.value=s:null),n:11},null,8,["modelValue"])])]),e[59]||(e[59]=l("li",null,"в разделе 2,3,4 необходимо учесть ГРУ",-1)),e[60]||(e[60]=l("li",null,"дополнить паспорт разделом «Испытание ГРУ на прочность и герметичность»",-1)),e[61]||(e[61]=l("li",null,"в «Заключении» вместо слов «(включая газопровод)» следует написать «(включая газопровод и ГРУ)»",-1))])]),t(b)?(m(),R("div",Ue,$(t(b)),1)):D("",!0),l("div",$e,[r(q,{disabled:t(T),prependIcon:"mdi-content-save",style:{"font-size":"1.2em"},onClick:V},{default:c(()=>[...e[74]||(e[74]=[a("Сохранить",-1)])]),_:1},8,["disabled"])])])]))}});export{xe as default};
