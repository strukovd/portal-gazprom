import{P as B,d as h,a as S,J as k,r as _,Q as x,x as n,z as t,B as d,M as T,O as V,I as r,R as C,S as N,y as i,A as c,T as z,C as A,D as I,q as M}from"#entry";import{B as b,a as q}from"./6M5rhbXH.js";import{B as w}from"./WfD9c_UJ.js";const E=B("app",{state:()=>({issues:[]}),actions:{}}),$={class:"issues-page"},D={class:"issues"},P={class:"title"},R={class:"flex-line"},U={class:"issue-date"},F={class:"date"},G={key:0},j=h({__name:"index",setup(J){const{$api:f}=S(),v=k(),l=E(),a=_("");async function m(){const o={};o.page=1,o.size=10;const s=v.token;if(!s){console.error("No token");return}a.value&&(o.search=a.value);const e=await f("v1/portal/notes",{query:o,method:"GET",headers:{Authorization:`Bearer ${s}`}});if(e.success){const u=e.data,p=["#0079C1","#14cf34","#e3ce31"];u.forEach(y=>{const g=p[Math.floor(Math.random()*p.length)];y.color=g}),l.issues=u}}return x(()=>{m()}),(o,s)=>(i(),n("section",$,[t("div",D,[s[5]||(s[5]=t("h1",null,"Заявки сотрудника",-1)),d(w,{modelValue:r(a),"onUpdate:modelValue":s[0]||(s[0]=e=>V(a)?a.value=e:null),onSubmit:m,style:{width:"100%"},"prepend-icon":"mdi-magnify",button:"Найти",placeholder:"Поиск"},null,8,["modelValue"]),(i(!0),n(C,null,N(r(l).issues,e=>(i(),n("div",{class:"issue",key:String(e.summary).slice(0,4)},[t("div",P,c(e.summary),1),t("div",R,[t("div",U,[s[2]||(s[2]=t("span",null,"Дата подачи: ",-1)),t("span",F,c(e.date),1)]),t("div",{class:"status",style:z({background:e.color})},c(e.issueStatus),5)]),d(b,{onClick:s[1]||(s[1]=u=>("navigateTo"in o?o.navigateTo:r(M))("/construct-pass")),prependIcon:"mdi-plus"},{default:A(()=>[...s[3]||(s[3]=[I("Добавить строй паспорт",-1)])]),_:1})]))),128)),r(l).issues.length?T("",!0):(i(),n("div",G,[d(q,{name:"mdi-magnify",size:"1.2em",style:{margin:"0 .4em 0 0"}}),s[4]||(s[4]=t("span",null,"Ничего не найдено",-1))]))])]))}});export{j as default};
